<!DOCTYPE html>
<html>
  <head>
    <title>Socket.IO chat</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
  </head>
  <body>
    <ul id="messages"></ul>
    
    <div style="text-align:center">MESSENGER</div>
    <ul id="render"  class="list-group">
      
    </ul>
    <form id="form" action="">
      <div class="input-group">
        <textarea id="input" class="form-control" aria-label="With textarea"></textarea>
        <button class="btn btn-primary">Send</button>
      </div>
    </form>
  </body>
  <script src="/socket.io/socket.io.js"></script>
  <script src="../public/client.js"></script>
  <script>
  
    const form = document.querySelector('#form')
const input = document.querySelector('#input')
const render = document.querySelector('#render')
let messages = []

    const socket = io();
socket.on('messsage',(data)=>{
  console.log(data);
    messages = data
    console.log(messages);
    messagesRender()
})
const messagesRender = () => {
if(messages.length > 0){
  const messdata = messages.map((item,index)=>{
    return `<li class="list-group-item">User : ${item}</li>`
  }).join('')
  render.innerHTML = messdata
}

}
form.addEventListener('submit',(e)=>{
e.preventDefault();
if (input.value) {
      socket.emit('value', input.value);
      input.value = '';
    }
})

  </script>
</html>